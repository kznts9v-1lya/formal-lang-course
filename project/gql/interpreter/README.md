# Спецификация интерпретатора GQL

В данном документе описаны основные особенности реализованного интерпретатора. 

## Типизация

Типизация строгая и динамическая. В процессе используется проверка типов. 

### Особенности

FiniteAutomaton, ContextFreeGrammar являются наследниками абстрактного типа Automaton. 
Введённая строка интерпретируется как регулярное выражение, представленного в виде FiniteAutomaton. 
Введённая строка в тройных кавычках интерпретируется как КС-грамматика, представленная в виде ContextFreeGrammar.

## Типы данных

### Bool

Булевый тип данных. Поддерживает основные логические операции между объектами своего типа. 
Допустимы логические И, ИЛИ, НЕ над объектами Bool. Результатом ялвяется Bool.

### Set 

Множество с элементами одного типа. Допустимы пересечение, объединение двух множеств. Реализована проверка на вхождение во множество IN.

### FiniteAutomaton 

Класс конечных автоматов. Служит для представления графов или регулярных выражений. Поддерживаются операции, допустимые с точки зрения теории формальных языков: пересечение, объединение двух FiniteAutomaton. Пересечение, объединение с ContextFreeGrammar. 

### ContextFreeGrammar 

Класс, представляющий собой обёртку над КС-грамматикой. Допустимы операции, аналогичные FiniteAutomaton. **Запрещено** пересечение двух КС-грамматик. 

## Используемые алгоритмы 

Применяются алгоритмы, реализованные в предыдущих заданиях. В частности, для вычисления достижимых вершин используется класс булевых матриц, основанный на scipy.sparse. 

## Пример работы

`regex_intersection.gql`

```
r1 = "l1" | "l2"*;
r2 = "l1"* | "l2" . "l4";
r12_intersection = r1 & r2;
PRINT r12_intersection;
r3 = r1 | r2;
PRINT r12_intersection & r3;
```

### Запуск интерпретатора

Из корня проекта:

`python -m project.gql.interpreter ./tests/data/gqls/regex_intersection.gql`

### Результат

```
($|($."l1"))
($|($."l1"))
```
